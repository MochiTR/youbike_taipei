(function(){"use strict";var t={2826:function(t,e,r){var s=r(9242),i=r(3396);const a={id:"app"},n=(0,i._)("h1",{class:"title"},"Taipei YouBike 查詢系統",-1);function o(t,e,r,s,o,l){const u=(0,i.up)("LightBox"),c=(0,i.up)("SearchArea"),h=(0,i.up)("ResultArea");return(0,i.wg)(),(0,i.iD)("div",a,[n,(0,i.Wm)(u,{ref:"lightbox"},null,512),(0,i.Wm)(c),(0,i.Wm)(h,{onEmitMap:l.openLightbox},null,8,["onEmitMap"])])}var l=r(7139);const u={class:"search-area"},c=(0,i.Uk)(" 區域 "),h=(0,i._)("option",{value:"1",disabled:""},"請選擇區域",-1),p=(0,i.Uk)(" 搜尋 ");function f(t,e,r,a,n,o){return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("label",null,[c,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.currentArea=t),onChange:e[1]||(e[1]=(...t)=>o.setCurrentArea&&o.setCurrentArea(...t))},[h,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filterData,((t,e)=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(t),1)))),128))],544),[[s.bM,n.currentArea]])]),(0,i._)("label",null,[p,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.keyWord=t)},null,512),[[s.nr,o.keyWord]])])])}var g={data(){return{currentArea:"1"}},computed:{filterData(){return this.$store.getters.filterData},keyWord:{get(){return this.$store.state.keyWord},set(t){this.$store.commit("setKeyWord",t)}}},methods:{setCurrentArea(){this.$store.commit("setCurrentArea",this.currentArea)}},created(){this.$store.dispatch("getYouBikeData")}},d=r(89);const b=(0,d.Z)(g,[["render",f]]);var m=b;const v={class:"result-area"},w={class:"result-list"},y=["onClick"],k=["innerHTML"],D={class:"result-info"},P={class:"result-info"},_={class:"result-info"},x={class:"result-info"},F={class:"result-info"},A={class:"pag"},R={class:"pag_group",ref:"pag"},L=["onClick"],O={key:2,class:"pag_info"};function C(t,e,r,s,a,n){const o=(0,i.up)("ResultFilter");return(0,i.wg)(),(0,i.iD)("div",v,[(0,i.Wm)(o,{onEmitFilter:n.changeArrFilter,ref:"resultFilter"},null,8,["onEmitFilter"]),(0,i._)("ul",w,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.currData,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.sno,title:"開啟地圖",onClick:r=>t.$emit("emit-map",e.lat,e.lng)},[(0,i._)("p",{innerHTML:n.highlight(e.sna)},null,8,k),(0,i._)("div",D,"站點停車格數量:"+(0,l.zw)(e.tot),1),(0,i._)("div",P,"站點目前車輛數:"+(0,l.zw)(e.sbi),1),(0,i._)("div",_,"更新時間:"+(0,l.zw)(e.mday),1),(0,i._)("div",x,"地點:"+(0,l.zw)(e.ar),1),(0,i._)("div",F,"空位數量:"+(0,l.zw)(e.bemp),1)],8,y)))),128))]),(0,i._)("div",A,[""!=a.currData?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"pre_btn",onClick:e[0]||(e[0]=(...t)=>n.prePag&&n.prePag(...t))},"←")):(0,i.kq)("",!0),(0,i._)("section",R,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pags,(t=>((0,i.wg)(),(0,i.iD)("button",{key:t,onClick:e=>n.setListData(n.filterResult,a.eachPage,t),class:(0,l.C_)({active:t===a.currPage})},(0,l.zw)(t),11,L)))),128))],512),""!=a.currData?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"pre_btn",onClick:e[1]||(e[1]=(...t)=>n.nextPag&&n.nextPag(...t))},"→")):(0,i.kq)("",!0),""!=a.currData?((0,i.wg)(),(0,i.iD)("div",O,"目前頁數:"+(0,l.zw)(a.currPage)+" / 總頁數:"+(0,l.zw)(a.pags.length),1)):(0,i.kq)("",!0)])])}var $=r(65);const W={class:"result-filter"},T=(0,i.uE)('<option value="0" disabled>選擇排序方式</option><option value="1">目前車輛數(高到低)</option><option value="2">目前車輛數(低到高)</option><option value="3">空位數量(高到低)</option><option value="4">空位數量(低到高)</option><option value="5">不排序</option>',6),j=[T];function z(t,e,r,a,n,o){return(0,i.wg)(),(0,i.iD)("div",W,[(0,i.wy)((0,i._)("select",{onChange:e[0]||(e[0]=(...t)=>o.filter&&o.filter(...t)),"onUpdate:modelValue":e[1]||(e[1]=t=>n.filterType=t)},j,544),[[s.bM,n.filterType]])])}var E={data(){return{filterType:"0"}},computed:{...(0,$.Se)(["filterResult"])},methods:{filter(){switch(+this.filterType){case 1:this.filterResult.sort(this.sortFun1);break;case 2:this.filterResult.sort(this.sortFun2);break;case 3:this.filterResult.sort(this.sortFun3);break;case 4:this.filterResult.sort(this.sortFun4);break;case 5:this.filterResult.sort(this.sortFun5);break}this.$emit("emit-filter",this.filterResult)},sortFun1(t,e){return t.sbi<e.sbi?1:t.sbi>e.sbi?-1:0},sortFun2(t,e){return t.sbi<e.sbi?-1:t.sbi>e.sbi>0?1:0},sortFun3(t,e){return t.bemp<e.bemp?1:t.bemp>e.bemp?-1:0},sortFun4(t,e){return t.bemp<e.bemp?-1:t.bemp>e.bemp?1:0},sortFun5(t,e){return t.sno<e.sno?-1:t.sno>e.sno?1:0},resetFilter(){this.filterType=5}}};const M=(0,d.Z)(E,[["render",z]]);var U=M,B={components:{ResultFilter:U},data(){return{currPage:1,arrFilter:"",eachPage:10,currData:"",pags:[]}},computed:{filterResult(){return this.$store.getters.filterResult},...(0,$.rn)(["keyWord"])},methods:{setListData(t,e,r){this.currPage=r,this.arrFilter=r>1?t.slice(r-1+"0",e*r):t.slice(r-1,e*r),this.currData=this.arrFilter.map((function(t){return t}))},setPag(t,e){this.pags=[];const r=Math.ceil(t.length/e);for(let s=1;s<=r;s++)this.pags.push(s)},highlight(t){return t.replace(new RegExp(this.keyWord,"g"),`<span class="highlight">${this.keyWord}</span>`)},changeArrFilter(t){this.setListData(t,this.eachPage,this.currPage)},prePag(){this.currPage>1&&(this.currPage-=1,this.$refs.pag.scrollTo({left:this.$refs.pag.scrollLeft-65,behavior:"smooth"}),this.setListData(this.filterResult,this.eachPage,this.currPage))},nextPag(){this.currPage<this.pags.length&&(this.currPage+=1,this.$refs.pag.scrollTo({left:this.$refs.pag.scrollLeft+65,behavior:"smooth"}),this.setListData(this.filterResult,this.eachPage,this.currPage))}},watch:{filterResult(){this.currPage=1,this.setListData(this.filterResult,this.eachPage,this.currPage),this.setPag(this.filterResult,this.eachPage),this.$refs.pag.scrollTo({left:0,behavior:"smooth"}),0!==this.filterResult.length&&this.$refs.resultFilter.resetFilter()}}};const S=(0,d.Z)(B,[["render",C]]);var Y=S;const Z={key:0,class:"wrap"},q=["src"];function H(t,e,r,a,n,o){return(0,i.wg)(),(0,i.j4)(s.uT,{name:"lbox"},{default:(0,i.w5)((()=>[n.isOpen?((0,i.wg)(),(0,i.iD)("div",Z,[(0,i._)("iframe",{style:{border:"0"},loading:"lazy",allowfullscreen:"",src:n.location},null,8,q),(0,i._)("button",{class:"closeBtn",onClick:e[0]||(e[0]=(...t)=>o.closeLightbox&&o.closeLightbox(...t))},(0,l.zw)(n.close),1)])):(0,i.kq)("",!0)])),_:1})}var K={data(){return{isOpen:!1,location:"",close:"X"}},methods:{showLightbox(t,e){this.isOpen=!0,this.location=`https://www.google.com/maps/embed/v1/place?q=${t},${e}&key=AIzaSyAucCX8isjeQUPofy-p-eGIf51oyFwrebA`},closeLightbox(){this.isOpen=!1}}};const V=(0,d.Z)(K,[["render",H]]);var I=V,X={name:"App",components:{SearchArea:m,ResultArea:Y,LightBox:I},methods:{openLightbox(t,e){this.$refs.lightbox.showLightbox(t,e)}}};const G=(0,d.Z)(X,[["render",o]]);var Q=G,J=r(6265),N=r.n(J),tt=(0,$.MT)({state:{currentArea:"",allData:[],keyWord:""},getters:{filterData(t){const e={};return t.allData.forEach((t=>{e[t.sarea]=t.sarea})),Object.keys(e)},filterResult(t){return t.keyWord?t.allData.filter((function(e){return e.sna.match(t.keyWord)})):t.allData.filter((function(e){return e.sarea===t.currentArea}))}},mutations:{setAllData(t,e){t.allData=e},setCurrentArea(t,e){t.currentArea=e},setKeyWord(t,e){t.keyWord=e}},actions:{getYouBikeData(t){N().get("https://tcgbusfs.blob.core.windows.net/dotapp/youbike/v2/youbike_immediate.json").then((function(e){t.commit("setAllData",e.data)}))}},modules:{}}),et=r(6423);const rt=(0,s.ri)(Q);rt.use(et.Z,N()),rt.use(tt),rt.mount("#app")}},e={};function r(s){var i=e[s];if(void 0!==i)return i.exports;var a=e[s]={id:s,loaded:!1,exports:{}};return t[s](a,a.exports,r),a.loaded=!0,a.exports}r.m=t,function(){r.amdO={}}(),function(){var t=[];r.O=function(e,s,i,a){if(!s){var n=1/0;for(c=0;c<t.length;c++){s=t[c][0],i=t[c][1],a=t[c][2];for(var o=!0,l=0;l<s.length;l++)(!1&a||n>=a)&&Object.keys(r.O).every((function(t){return r.O[t](s[l])}))?s.splice(l--,1):(o=!1,a<n&&(n=a));if(o){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[s,i,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,a,n=s[0],o=s[1],l=s[2],u=0;if(n.some((function(e){return 0!==t[e]}))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(l)var c=l(r)}for(e&&e(s);u<n.length;u++)a=n[u],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(c)},s=self["webpackChunkyoubike_taipei"]=self["webpackChunkyoubike_taipei"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(2826)}));s=r.O(s)})();
//# sourceMappingURL=app.5cb1d12a.js.map